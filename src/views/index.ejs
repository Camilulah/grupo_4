<!DOCTYPE html>
<html lang="es">
  <!-- Head -->
  <%- include('./partials/head.ejs', {title: 'Home', style: 'index'}) %>
  <body>
    <!-- Header -->
    <%- include('./partials/header.ejs') %>
    <!-- Carousel robado de internet, falta darle dinamismo con EJS -->
    <div class="carousel">
      <div class="slides">
        <div class="slide" id="slide-1">
          <img src="/images/carousel1/banner.jpg" alt="Slide 1">
        </div>
        <div class="slide" id="slide-2">
          <img src="/images/carousel1/banner1.jpg" alt="Slide 2">
        </div>
        <div class="slide" id="slide-3">
          <img src="/images/carousel1/banner2.jpg" alt="Slide 3">
        </div>
        <div class="slide" id="slide-4">
          <img src="/images/carousel1/banner1.jpg" alt="Banner">
        </div>
      </div>
      <div class="controls">
        <label for="slide1"></label>
        <label for="slide2"></label>
        <label for="slide3"></label>
        <label for="slide4"></label>
      </div>
    </div>
    <!-- Comienzo del main y sus productos -->
    <!-- Se accede al json a través del controlador, se convierten los productos en objetos y se manipulan acá -->
    <main>
      <!-- Esta section también tiene su json a parte con marcas populares y es dinámica -->
      <section class="categorias-populares">
        <div class="container-flex">
          <% marcas.forEach(marca => { %>
          <article class="marcas">
            <div class="product-card">
              <img src="<%= marca.img %>" alt="">
            </div>
          </article>
          <% }) %>
        </div>
      </section>
      <section class="productos-a">
        <h1>OFERTAS</h1>
        <div class="container-flex">
          <!-- Implementada la lógica para que solo cargue productos que tengan el descuento mayor a 0 -->
          <% for(let i = 0; i < 4; i++){ %>
          <% if(productos[i].descuento > 0) { %>
          <div class="article-container">
            <article class="article">
              <a href="/product/detail/<%= productos[i].id %>">
                <div class="product-card">
                  <img src="/images/products/<%= productos[i].img %>" alt="">
                  <div class="product-detail">
                    <p class="discount"><%= productos[i].descuento %>% Off</p>
                    <p class="precio">$<%= productos[i].precio.toLocaleString('es-ES') %></p>
                    <p class="marca"><%= productos[i].marca %></p>
                    <h3><a href="/product/detail"><%= productos[i].nombre %></a></h3>
                    <div class="reputation-icon">
                      <% for(let x = 1; x <= productos[i].punt; x++){ %>
                      <i class="fa-solid fa-star"></i>
                      <% } %>
                    </div>
                  </div>
                </div>
              </a>
            </article>
          </div>
          <% } %>
          <% } %>
          <!-- Arreglar la redireccion -->
          <button class="ver-mas">Ver más</button>
        </div>
      </section>
      <section class="productos-a">
        <h1>RECOMENDADO PARA VOS</h1>
        <div class="container-flex">
          <% for(let i = 0; i < 4; i++){ %>
          <div class="article-container">
            <article class="article">
              <a href="/product/detail/<%= productos[i].id %>">
                <div class="product-card">
                  <img src="/images/products/<%= productos[i].img %>" alt="">
                  <div class="product-detail">
                    <p class="precio">$<%= productos[i].precio.toLocaleString('es-ES') %></p>
                    <p class="marca"><%= productos[i].marca %></p>
                    <h3><a href="/product/detail"><%= productos[i].nombre %></a></h3>
                    <div class="reputation-icon">
                      <% for(let x = 1; x <= productos[i].punt; x++){ %>
                      <i class="fa-solid fa-star"></i>
                      <% } %>
                    </div>
                  </div>
                </div>
              </a>
            </article>
          </div>
          <% } %>
        </div>
      </section>
      
      <section class="productos-a">
        <h1>INSPIRADO EN LO QUE VISTE</h1>
        <div class="container-flex">
          <% for(let i = 0; i < 4; i++){ %>
          <div class="article-container">
            <article class="article">
              <a href="/product/detail/<%= productos[i].id %>">
                <div class="product-card">
                  <img src="/images/products/<%= productos[i].img %>" alt="">
                  <div class="product-detail">
                    <p class="precio">$<%= productos[i].precio.toLocaleString('es-ES') %></p>
                    <p class="marca"><%= productos[i].marca %></p>
                    <h3><a href="/product/detail"><%= productos[i].nombre %></a></h3>
                    <div class="reputation-icon">
                      <% for(let x = 1; x <= productos[i].punt; x++){ %>
                      <i class="fa-solid fa-star"></i>
                      <% } %>
                    </div>
                  </div>
                </div>
              </a>
            </article>
          </div>
          <% } %>
        </div>
      </section>
    </main>
    <!-- Footer -->
    <%- include('./partials/footer.ejs') %>
  </body>
</html>
